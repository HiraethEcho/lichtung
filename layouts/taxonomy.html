{{- define "main" -}}
  <main>
    <header class="page-header">
      {{- partial "breadcrumbs.html" . -}}
      {{- with .Params.Summary -}}
        <p>{{- . -}}</p>
      {{ end -}}
      <label for="aside-checkbox" id="aside-btn">â‡„</label>
    </header>
    <article>
      <h1>{{- .Title -}}</h1>
      {{- with .Content -}}
        {{- . -}}
      {{ end }}
      {{- range .Data.Terms }}
        <h2 id="term-{{- .Page.Title -}}">
          <a class="sectionlink" href="{{- .Page.RelPermalink -}}"
            >{{- .Page.Title -}}</a
          >
        </h2>
        {{- with .Page.Params.summary -}}
          <p>{{- . -}}</p>
        {{ end -}}
        <ul>
          {{- $limit := default 3 .Page.Site.Params.PostPerTermLimit -}}
          {{- range .Pages | first $limit -}}
            <li>
              <a
                class="pagelink"
                aria-label="post link to {{ .Title | plainify -}}"
                href="{{- .RelPermalink -}}"
              >
                {{- .Title -}}</a
              >
              {{- with .Date }}
                {{ .Format (default "2006/01/02" $.Site.Params.DateFormat) -}}
              {{ end }}
              {{- with .Params.summary -}}
                <p>{{- . -}}</p>
              {{- end -}}
            </li>
          {{ end -}}
          {{- if le ( len .Pages ) $limit -}}
          {{- else -}}
            <li>...</li>
          {{- end -}}
        </ul>
      {{- end -}}
    </article>
  </main>
  <input type="checkbox" id="aside-checkbox" style="display: none;" />
  <aside class="site-aside">
    <div class="asideblock" id="TableOfContents">
      <details class="menu-fold" open>
        <summary class="side-entry">Terms</summary>
        <ul class="indentline">
          {{- range .Data.Terms }}
            <li class="side-entry">
              <a class="inpage" href="#term-{{- .Page.Title -}}">
                {{- .Page.Title -}}
              </a>
            </li>
          {{- end -}}
        </ul>
      </details>
    </div>
  </aside>
{{- end -}}
